---
title: "COVID State Web Scraping"
output: html_document
---

# Set Up

```{r, message = FALSE, warning = FALSE }
library(tidyverse)
library(pdftools)
library(rvest)
library(lubridate)
library(readxl)
source("states.R")
```

```{r}
now = Sys.time() %>% as_date
```


# Automated States

- Oklahoma: needs demographic and ages manually entered
- Mississippi: needs age and sex manually entered
- Florida: no manual entry needed, expect long compilation
- Tennessee: no manual entry needed, but needs a date input to function
- North Carolina: needs age manually entered
- District of Columbia: no data on age available
- South Carolina: needs age and sex manually entered

```{r}
# Get as much automated data as you can
compiled_data_20200512 = compile(tn_date = "2020-05-13")
save(compiled_data_20200512, file = "../Data/meta_2020-05-12-cbp.rda")
```

## Troubleshooting

```{r}
oklahoma = get_oklahoma()
mississippi = get_mississippi()
florida = get_florida()
tennessee = get_tennessee("2020-05-13")
north_carolina = get_north_carolina()
dc = get_dc()
south_carolina = get_south_carolina()
new_jersey = get_new_jersey()
new_hampshire = get_new_hampshire()
guam = get_guam()
```

# Manual States

In addition to the information above, we need manual entry for:

- Virgin Island
- Iowa
- Arizona
- Nevada
- West Virginia
- Delaware
- Hawaii
- South Dakota
- Idaho
- Wyoming
- Kansas (can automate but reading pdf crashes my RStudio?)
- Puerto Rico
- New York

## Puerto Rico


# Compile Data

## TODO:

- combine Aijins and your data compilation into one
- standardize Aijins data into your format
- ask to just incorporate courtneys functions into your own compiler
- create a function to make it easier to manually insert data from states that we can get all 50




